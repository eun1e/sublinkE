import{d as e,aA as a,aB as s,av as l,r as o,aR as r,a_ as t,C as n,aC as i,L as c,o as d,c as p,e as u,l as m,Z as g,g as f,aP as h,w as v,a$ as w,aS as j,aT as x,t as _,aG as b,a2 as y,Y as C,ac as V,a0 as K,a1 as q,aL as k}from"./index.CBDW5MZN.js";import{E as A}from"./el-card.BDQYTqej.js";import{E,a as L}from"./el-form-item.CGv1hwlE.js";import{E as $}from"./el-image-viewer.BLyTaiAL.js";import"./el-tooltip.l0sNRNKZ.js";import{E as z}from"./el-popper.BGmmqjsP.js";import{S as R}from"./index.By78h_CD.js";import{E as U}from"./el-tag.BJkdW0pt.js";import{c as D,_ as B}from"./el-switch.DmeFG1L7.js";import{_ as G}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.CsuSQqyN.js";import"./_initCloneObject.C-kpAzhc.js";import"./debounce.BGyIsUNQ.js";import"./position.BJ7E8s-6.js";import"./isUndefined.DgmxjSXK.js";import"./el-scrollbar.z2K0iAz0.js";import"./dropdown.UrPZ1Ync.js";import"./refs.BcQWbdHY.js";const I={class:"login-container"},S={class:"absolute-lt flex-x-end p-3 w-full"},T={class:"text-center relative"},F={class:"flex-y-center w-full"},H={class:"flex-y-center w-full"},M={class:"flex-y-center w-full"},O=G(e({__name:"index",setup(e){const G=a(),O=s(),{t:J}=l(),N=o(O.theme===r.DARK),P=o(!0),Y=o(!1),Z=o(!1),Q=o(),W=o(E),{height:X}=t(),ee=o({username:"",password:""}),ae=n((()=>({username:[{required:!0,trigger:"blur",message:J("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:J("login.message.password.required")},{min:6,message:J("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:J("login.message.captchaCode.required")}]})));function se(){w().then((({data:e})=>{ee.value.captchaKey=e.captchaKey,Q.value=e.captchaBase64}))}const le=i();function oe(){W.value.validate((e=>{e&&(Y.value=!0,G.login(ee.value).then((()=>{const e=le.query,a=e.redirect??"/",s=Object.keys(e).reduce(((a,s)=>("redirect"!==s&&(a[s]=e[s]),a)),{});k.push({path:a,query:s})})).catch((()=>{se()})).finally((()=>{Y.value=!1})))}))}const re=()=>{const e=O.theme===r.DARK?r.LIGHT:r.DARK;O.changeTheme(e)};function te(e){e instanceof KeyboardEvent&&(Z.value=e.getModifierState("CapsLock"))}return c((()=>{X.value<600?P.value=!1:P.value=!0})),d((()=>{se()})),(e,a)=>{const s=D,l=B,o=U,r=R,t=K,n=L,i=z,c=$,d=q,w=E,k=A;return p(),u("div",I,[m("div",S,[g(s,{modelValue:f(N),"onUpdate:modelValue":a[0]||(a[0]=e=>h(N)?N.value=e:null),"inline-prompt":"","active-icon":f(j),"inactive-icon":f(x),onChange:re},null,8,["modelValue","active-icon","inactive-icon"]),g(l,{class:"ml-2 cursor-pointer"})]),g(k,{class:"!border-none !bg-transparent !rounded-4% w-100 <sm:w-85"},{default:v((()=>[m("div",T,[m("h2",null,_(f(b).title),1),g(o,{class:"ml-2 absolute-rt"},{default:v((()=>[y(_(f(b).version),1)])),_:1})]),g(w,{ref_key:"loginFormRef",ref:W,model:f(ee),rules:f(ae),class:"login-form"},{default:v((()=>[g(n,{prop:"username"},{default:v((()=>[m("div",F,[g(r,{"icon-class":"user",class:"mx-2"}),g(t,{ref:"username",modelValue:f(ee).username,"onUpdate:modelValue":a[1]||(a[1]=e=>f(ee).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),g(i,{visible:f(Z),content:e.$t("login.capsLock"),placement:"right"},{default:v((()=>[g(n,{prop:"password"},{default:v((()=>[m("div",H,[g(r,{"icon-class":"lock",class:"mx-2"}),g(t,{modelValue:f(ee).password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(ee).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",onKeyup:[te,C(oe,["enter"])],size:"large",class:"h-[48px] pr-2","show-password":""},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),g(n,{prop:"captchaCode"},{default:v((()=>[m("div",M,[g(r,{"icon-class":"captcha",class:"mx-2"}),g(t,{modelValue:f(ee).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>f(ee).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:C(oe,["enter"])},null,8,["modelValue","placeholder"]),g(c,{onClick:se,src:f(Q),class:"rounded-tr-md rounded-br-md cursor-pointer h-[48px]"},null,8,["src"])])])),_:1}),g(d,{loading:f(Y),type:"primary",size:"large",class:"w-full",onClick:V(oe,["prevent"])},{default:v((()=>[y(_(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-55b233b4"]]);export{O as default};

import{d as e,aA as a,aB as s,aw as l,r as o,aP as r,aY as t,B as n,aC as i,N as c,o as d,e as p,k as u,a0 as m,g,aN as f,w as h,aZ as v,c as w,aQ as j,aR as x,t as y,aG as _,a4 as b,$ as C,ad as V,a2 as K,a3 as k,aL as q}from"./index.NByQEtge.js";import{E}from"./el-card.C-3ioL7M.js";import{E as A,a as $}from"./el-form-item.Zb-OlE_J.js";import{E as z}from"./el-image-viewer.eM1EfLIH.js";import"./el-tooltip.l0sNRNKZ.js";import{E as L}from"./el-popper.mgMmiG3o.js";import{S as R}from"./index.IT_S1rXF.js";import{E as U}from"./el-tag.CnoBvLCb.js";import{c as B,_ as D}from"./el-switch.BL2OvSWG.js";import{_ as G}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.Bw0AKaiM.js";import"./_initCloneObject.CX1oVPiC.js";import"./index.DvAu8cC1.js";import"./debounce.DDqR4grL.js";import"./position.Ci16j4N6.js";import"./isUndefined.DgmxjSXK.js";import"./el-scrollbar.WNuCJrQP.js";import"./dropdown.BDzxrTjf.js";import"./refs.Be5fksNl.js";const I={class:"login-container"},N={class:"absolute-lt flex-x-end p-3 w-full"},O={class:"text-center relative"},H={class:"flex-y-center w-full"},M={class:"flex-y-center w-full"},S={class:"flex-y-center w-full"},T=G(e({__name:"index",setup(e){const G=a(),T=s(),{t:F}=l(),J=o(T.theme===r.DARK),P=o(!0),Q=o(!1),Y=o(!1),Z=o(),W=o(A),{height:X}=t(),ee=o({username:"",password:""}),ae=n((()=>({username:[{required:!0,trigger:"blur",message:F("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:F("login.message.password.required")},{min:6,message:F("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:F("login.message.captchaCode.required")}]})));function se(){v().then((({data:e})=>{ee.value.captchaKey=e.captchaKey,Z.value=e.captchaBase64}))}const le=i();function oe(){W.value.validate((e=>{e&&(Q.value=!0,G.login(ee.value).then((()=>{const e=le.query,a=e.redirect??"/",s=Object.keys(e).reduce(((a,s)=>("redirect"!==s&&(a[s]=e[s]),a)),{});q.push({path:a,query:s})})).catch((()=>{se()})).finally((()=>{Q.value=!1})))}))}const re=()=>{const e=T.theme===r.DARK?r.LIGHT:r.DARK;T.changeTheme(e)};function te(e){e instanceof KeyboardEvent&&(Y.value=e.getModifierState("CapsLock"))}return c((()=>{X.value<600?P.value=!1:P.value=!0})),d((()=>{se()})),(e,a)=>{const s=B,l=D,o=U,r=R,t=K,n=$,i=L,c=z,d=k,v=A,q=E;return w(),p("div",I,[u("div",N,[m(s,{modelValue:g(J),"onUpdate:modelValue":a[0]||(a[0]=e=>f(J)?J.value=e:null),"inline-prompt":"","active-icon":g(j),"inactive-icon":g(x),onChange:re},null,8,["modelValue","active-icon","inactive-icon"]),m(l,{class:"ml-2 cursor-pointer"})]),m(q,{class:"!border-none !bg-transparent !rounded-4% w-100 <sm:w-85"},{default:h((()=>[u("div",O,[u("h2",null,y(g(_).title),1),m(o,{class:"ml-2 absolute-rt"},{default:h((()=>[b(y(g(_).version),1)])),_:1})]),m(v,{ref_key:"loginFormRef",ref:W,model:g(ee),rules:g(ae),class:"login-form"},{default:h((()=>[m(n,{prop:"username"},{default:h((()=>[u("div",H,[m(r,{"icon-class":"user",class:"mx-2"}),m(t,{ref:"username",modelValue:g(ee).username,"onUpdate:modelValue":a[1]||(a[1]=e=>g(ee).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),m(i,{visible:g(Y),content:e.$t("login.capsLock"),placement:"right"},{default:h((()=>[m(n,{prop:"password"},{default:h((()=>[u("div",M,[m(r,{"icon-class":"lock",class:"mx-2"}),m(t,{modelValue:g(ee).password,"onUpdate:modelValue":a[2]||(a[2]=e=>g(ee).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",onKeyup:[te,C(oe,["enter"])],size:"large",class:"h-[48px] pr-2","show-password":""},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),m(n,{prop:"captchaCode"},{default:h((()=>[u("div",S,[m(r,{"icon-class":"captcha",class:"mx-2"}),m(t,{modelValue:g(ee).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>g(ee).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:C(oe,["enter"])},null,8,["modelValue","placeholder"]),m(c,{onClick:se,src:g(Z),class:"rounded-tr-md rounded-br-md cursor-pointer h-[48px]"},null,8,["src"])])])),_:1}),m(d,{loading:g(Q),type:"primary",size:"large",class:"w-full",onClick:V(oe,["prevent"])},{default:h((()=>[b(y(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-22e0793c"]]);export{T as default};

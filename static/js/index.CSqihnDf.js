import{d as e,r as a,aZ as s,aA as l,aB as o,aw as r,aP as t,aY as n,B as i,aC as c,N as d,o as p,e as u,k as m,a0 as g,g as f,aN as h,w as v,a_ as w,c as j,aQ as x,aR as _,t as y,aG as b,a4 as C,$ as V,ad as K,a2 as k,a3 as q,aL as E}from"./index.DyNlybW8.js";import{E as A}from"./el-card.D2UsDnEW.js";import{E as $,a as z}from"./el-form-item._k0VlEyT.js";import{E as L}from"./el-image-viewer.CZiAolmi.js";import"./el-tooltip.l0sNRNKZ.js";import{E as R}from"./el-popper.C9M0Bbii.js";import{S as U}from"./index.Ddl_8T5j.js";import{E as B}from"./el-tag.BFOJr8CX.js";import{c as D,_ as G}from"./el-switch.CbDJev3H.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.3PGFVhhx.js";import"./_initCloneObject.D639xHZ3.js";import"./index.Bc0TZ_L_.js";import"./debounce.CCjn2xK-.js";import"./position.CtLx0TDT.js";import"./isUndefined.DgmxjSXK.js";import"./el-scrollbar.BPLDMiHy.js";import"./dropdown.DKXqmKTq.js";import"./refs.nojHsyLD.js";const N={class:"login-container"},O={class:"absolute-lt flex-x-end p-3 w-full"},H={class:"text-center relative"},M={class:"flex-y-center w-full"},S={class:"flex-y-center w-full"},T={class:"flex-y-center w-full"},F=I(e({__name:"index",setup(e){const I=a("");s().then((e=>{I.value=e.data})).catch((e=>{}));const F=l(),J=o(),{t:P}=r(),Q=a(J.theme===t.DARK),Y=a(!0),Z=a(!1),W=a(!1),X=a(),ee=a($),{height:ae}=n(),se=a({username:"",password:""}),le=i((()=>({username:[{required:!0,trigger:"blur",message:P("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:P("login.message.password.required")},{min:6,message:P("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:P("login.message.captchaCode.required")}]})));function oe(){w().then((({data:e})=>{se.value.captchaKey=e.captchaKey,X.value=e.captchaBase64}))}const re=c();function te(){ee.value.validate((e=>{e&&(Z.value=!0,F.login(se.value).then((()=>{const e=re.query,a=e.redirect??"/",s=Object.keys(e).reduce(((a,s)=>("redirect"!==s&&(a[s]=e[s]),a)),{});E.push({path:a,query:s})})).catch((()=>{oe()})).finally((()=>{Z.value=!1})))}))}const ne=()=>{const e=J.theme===t.DARK?t.LIGHT:t.DARK;J.changeTheme(e)};function ie(e){e instanceof KeyboardEvent&&(W.value=e.getModifierState("CapsLock"))}return d((()=>{ae.value<600?Y.value=!1:Y.value=!0})),p((()=>{oe()})),(e,a)=>{const s=D,l=G,o=B,r=U,t=k,n=z,i=R,c=L,d=q,p=$,w=A;return j(),u("div",N,[m("div",O,[g(s,{modelValue:f(Q),"onUpdate:modelValue":a[0]||(a[0]=e=>h(Q)?Q.value=e:null),"inline-prompt":"","active-icon":f(x),"inactive-icon":f(_),onChange:ne},null,8,["modelValue","active-icon","inactive-icon"]),g(l,{class:"ml-2 cursor-pointer"})]),g(w,{class:"!border-none !bg-transparent !rounded-4% w-100 <sm:w-85"},{default:v((()=>[m("div",H,[m("h2",null,y(f(b).title),1),g(o,{class:"ml-2 absolute-rt"},{default:v((()=>[C(y(f(I)),1)])),_:1})]),g(p,{ref_key:"loginFormRef",ref:ee,model:f(se),rules:f(le),class:"login-form"},{default:v((()=>[g(n,{prop:"username"},{default:v((()=>[m("div",M,[g(r,{"icon-class":"user",class:"mx-2"}),g(t,{ref:"username",modelValue:f(se).username,"onUpdate:modelValue":a[1]||(a[1]=e=>f(se).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),g(i,{visible:f(W),content:e.$t("login.capsLock"),placement:"right"},{default:v((()=>[g(n,{prop:"password"},{default:v((()=>[m("div",S,[g(r,{"icon-class":"lock",class:"mx-2"}),g(t,{modelValue:f(se).password,"onUpdate:modelValue":a[2]||(a[2]=e=>f(se).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",onKeyup:[ie,V(te,["enter"])],size:"large",class:"h-[48px] pr-2","show-password":""},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),g(n,{prop:"captchaCode"},{default:v((()=>[m("div",T,[g(r,{"icon-class":"captcha",class:"mx-2"}),g(t,{modelValue:f(se).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>f(se).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:V(te,["enter"])},null,8,["modelValue","placeholder"]),g(c,{onClick:oe,src:f(X),class:"rounded-tr-md rounded-br-md cursor-pointer h-[48px]"},null,8,["src"])])])),_:1}),g(d,{loading:f(Z),type:"primary",size:"large",class:"w-full",onClick:K(te,["prevent"])},{default:v((()=>[C(y(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-ba695567"]]);export{F as default};

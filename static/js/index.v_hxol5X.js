import{d as e,r as a,a$ as s,aB as l,aC as o,ax as r,aR as t,a_ as n,B as i,aD as c,P as d,o as p,c as u,e as m,l as g,$ as f,g as h,aS as v,aT as w,aP as j,w as x,t as _,aI as b,a6 as y,a4 as C,a3 as V,a5 as K,ad as q,b0 as k,aN as E}from"./index.De7oQXzt.js";import{E as $}from"./el-card.Ddjk6a0D.js";import{E as z,a as A}from"./el-form-item.BQZr0D68.js";import{E as D}from"./el-image-viewer.HenYfchw.js";import"./el-tooltip.l0sNRNKZ.js";import{E as R}from"./el-popper.CfrP2Wyl.js";import{S as U}from"./index.tsnVuoxc.js";import{E as B}from"./el-tag.CgFp2Jm5.js";import{c as I,_ as L}from"./el-switch.CzVYz-Ne.js";import{_ as O}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.Djg6z-ho.js";import"./_initCloneObject.CWoh3IgJ.js";import"./index.CB4Cp5_6.js";import"./debounce.D0GXsc8l.js";import"./position.XRXIQuNq.js";import"./isUndefined.DgmxjSXK.js";import"./el-scrollbar.DlP7n3hc.js";import"./dropdown.CVzZlPfh.js";import"./refs.CTtEOxkY.js";const S={class:"login-container"},T={class:"absolute-lt flex-x-end p-3 w-full"},G={class:"text-center relative"},H={class:"flex-y-center w-full"},M={class:"flex-y-center w-full"},N={class:"flex-y-center w-full"},P=O(e({__name:"index",setup(e){const O=a("");s().then((e=>{O.value=e.data})).catch((e=>{}));const P=l(),F=o(),{t:J}=r(),Q=a(F.theme===t.DARK),W=a(!0),X=a(!1),Y=a(!1),Z=a(),ee=a(z),{height:ae}=n(),se=a({username:"",password:""}),le=i((()=>({username:[{required:!0,trigger:"blur",message:J("login.message.username.required")}],password:[{required:!0,trigger:"blur",message:J("login.message.password.required")},{min:6,message:J("login.message.password.min"),trigger:"blur"}],captchaCode:[{required:!0,trigger:"blur",message:J("login.message.captchaCode.required")}]})));function oe(){k().then((({data:e})=>{se.value.captchaKey=e.captchaKey,Z.value=e.captchaBase64}))}const re=c();function te(){ee.value.validate((e=>{e&&(X.value=!0,P.login(se.value).then((()=>{const e=re.query,a=e.redirect??"/",s=Object.keys(e).reduce(((a,s)=>("redirect"!==s&&(a[s]=e[s]),a)),{});E.push({path:a,query:s})})).catch((()=>{oe()})).finally((()=>{X.value=!1})))}))}const ne=()=>{const e=F.theme===t.DARK?t.LIGHT:t.DARK;F.changeTheme(e)};function ie(e){e instanceof KeyboardEvent&&(Y.value=e.getModifierState("CapsLock"))}return d((()=>{ae.value<600?W.value=!1:W.value=!0})),p((()=>{oe()})),(e,a)=>{const s=I,l=L,o=B,r=U,t=C,n=A,i=R,c=D,d=K,p=z,k=$;return m(),u("div",S,[g("div",T,[f(s,{modelValue:h(Q),"onUpdate:modelValue":a[0]||(a[0]=e=>j(Q)?Q.value=e:null),"inline-prompt":"","active-icon":h(w),"inactive-icon":h(v),onChange:ne},null,8,["modelValue","active-icon","inactive-icon"]),f(l,{class:"ml-2 cursor-pointer"})]),f(k,{class:"!border-none !bg-transparent !rounded-4% w-100 <sm:w-85"},{default:x((()=>[g("div",G,[g("h2",null,_(h(b).title),1),f(o,{class:"ml-2 absolute-rt"},{default:x((()=>[y(_(h(O)),1)])),_:1})]),f(p,{ref_key:"loginFormRef",ref:ee,model:h(se),rules:h(le),class:"login-form"},{default:x((()=>[f(n,{prop:"username"},{default:x((()=>[g("div",H,[f(r,{"icon-class":"user",class:"mx-2"}),f(t,{ref:"username",modelValue:h(se).username,"onUpdate:modelValue":a[1]||(a[1]=e=>h(se).username=e),placeholder:e.$t("login.username"),name:"username",size:"large",class:"h-[48px]"},null,8,["modelValue","placeholder"])])])),_:1}),f(i,{visible:h(Y),content:e.$t("login.capsLock"),placement:"right"},{default:x((()=>[f(n,{prop:"password"},{default:x((()=>[g("div",M,[f(r,{"icon-class":"lock",class:"mx-2"}),f(t,{modelValue:h(se).password,"onUpdate:modelValue":a[2]||(a[2]=e=>h(se).password=e),placeholder:e.$t("login.password"),type:"password",name:"password",onKeyup:[ie,V(te,["enter"])],size:"large",class:"h-[48px] pr-2","show-password":""},null,8,["modelValue","placeholder"])])])),_:1})])),_:1},8,["visible","content"]),f(n,{prop:"captchaCode"},{default:x((()=>[g("div",N,[f(r,{"icon-class":"captcha",class:"mx-2"}),f(t,{modelValue:h(se).captchaCode,"onUpdate:modelValue":a[3]||(a[3]=e=>h(se).captchaCode=e),"auto-complete":"off",size:"large",class:"flex-1",placeholder:e.$t("login.captchaCode"),onKeyup:V(te,["enter"])},null,8,["modelValue","placeholder"]),f(c,{onClick:oe,src:h(Z),class:"rounded-tr-md rounded-br-md cursor-pointer h-[48px]"},null,8,["src"])])])),_:1}),f(d,{loading:h(X),type:"primary",size:"large",class:"w-full",onClick:q(te,["prevent"])},{default:x((()=>[y(_(e.$t("login.login")),1)])),_:1},8,["loading"])])),_:1},8,["model","rules"])])),_:1})])}}}),[["__scopeId","data-v-ba695567"]]);export{P as default};

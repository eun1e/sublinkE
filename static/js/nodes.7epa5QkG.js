import{d as e,r as a,o as l,C as t,c as o,e as s,Z as u,w as i,l as n,a2 as r,g as p,ay as v,W as m,aH as d,a0 as c,a1 as f,aN as g,aO as y}from"./index.BEL0k1uT.js";import{E as _}from"./el-card.NEOTCDFP.js";import{g as j,A as C,U as h,D as k,E as w,a as x,b}from"./node.B0xVC5Ii.js";import"./el-tag.BLFacvqW.js";import"./el-select.DpWaLYER.js";import"./el-scrollbar.C983lo3e.js";import"./el-popper.CI4OGcaS.js";import"./el-tooltip.l0sNRNKZ.js";import{E as D}from"./el-dialog.0kwwX0P2.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isEqual.C5Jvut-J.js";import"./_initCloneObject.B_H1lMTh.js";import"./debounce.9WCS1hu3.js";import"./index.Be1gaN0H.js";import"./strings.BJYEQLBd.js";import"./isUndefined.DgmxjSXK.js";import"./use-dialog.tuO39jkU.js";import"./refs.BRROSo1d.js";const V=e=>(g("data-v-4ee51547"),e=e(),y(),e),z={class:"dialog-footer"},E=V((()=>n("div",{style:{"margin-bottom":"10px"}},null,-1))),B=V((()=>n("div",{style:{"margin-top":"20px"}},null,-1))),O=V((()=>n("div",{style:{"margin-top":"20px"}},null,-1))),S=I(e({__name:"nodes",setup(e){const g=a([]),y=a(""),I=a(""),V=a(""),S=a(!1),T=a(),U=a("");async function N(){const{data:e}=await j();g.value=e}l((async()=>{N()}));const L=()=>{U.value="添加节点",S.value=!0},H=async()=>{"添加节点"==U.value?(await C({link:y.value.trim(),name:I.value.trim()}),v.success("添加成功")):(await h({oldname:V.value.trim(),link:y.value.trim(),name:I.value.trim()}),v.success("更新成功")),N(),y.value="",I.value="",S.value=!1},K=a([]),q=e=>{K.value=e},A=()=>{0!==K.value.length&&d.confirm("你是否要删除选中这些 ?","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{for(let e=0;e<K.value.length;e++)k({id:K.value[e].ID}),g.value=g.value.filter((a=>a.ID!==K.value[e].ID));v({type:"success",message:"删除成功"})}))},G=a(1),M=a(10),Q=e=>{M.value=e},R=e=>{G.value=e},W=t((()=>{const e=(G.value-1)*M.value,a=e+M.value;return g.value.slice(e,a)}));return(e,a)=>{const l=c,t=f,j=D,C=w,h=x,K=b,Z=_;return o(),s("div",null,[u(j,{modelValue:S.value,"onUpdate:modelValue":a[3]||(a[3]=e=>S.value=e),title:U.value},{footer:i((()=>[n("div",z,[u(t,{onClick:a[2]||(a[2]=e=>S.value=!1)},{default:i((()=>[r("关闭")])),_:1}),u(t,{type:"primary",onClick:H},{default:i((()=>[r("确定")])),_:1})])])),default:i((()=>[u(l,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value=e),placeholder:"请输入节点"},null,8,["modelValue"]),u(l,{modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value=e),placeholder:"请输入备注"},null,8,["modelValue"])])),_:1},8,["modelValue","title"]),u(Z,null,{default:i((()=>[u(t,{type:"primary",onClick:L},{default:i((()=>[r("添加节点")])),_:1}),E,u(h,{ref_key:"table",ref:T,data:p(W),style:{width:"100%"},onSelectionChange:q},{default:i((()=>[u(C,{type:"selection",fixed:"",prop:"ID",label:"id"}),u(C,{prop:"Name",label:"备注"}),u(C,{prop:"Link",label:"节点","show-overflow-tooltip":!0}),u(C,{prop:"CreateDate",label:"创建时间",sortable:""}),u(C,{fixed:"right",label:"操作",width:"120"},{default:i((e=>[u(t,{link:"",type:"primary",size:"small",onClick:a=>(e=>{for(let a=0;a<g.value.length;a++)g.value[a].ID===e.ID&&(U.value="编辑节点",I.value=g.value[a].Name,V.value=I.value,y.value=g.value[a].Link,S.value=!0)})(e.row)},{default:i((()=>[r("编辑")])),_:2},1032,["onClick"]),u(t,{link:"",type:"primary",size:"small",onClick:a=>{return l=e.row,void d.confirm(`你是否要删除 ${l.Name} ?`,"提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{await k({id:l.ID}),v({type:"success",message:"删除成功"}),N()}));var l}},{default:i((()=>[r("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),B,u(t,{type:"info",onClick:a[4]||(a[4]=e=>{m((()=>{g.value.forEach((e=>{T.value.toggleRowSelection(e,!0)}))}))})},{default:i((()=>[r("全选")])),_:1}),u(t,{type:"warning",onClick:a[5]||(a[5]=e=>{T.value.clearSelection()})},{default:i((()=>[r("取消选择")])),_:1}),u(t,{type:"danger",onClick:A},{default:i((()=>[r("批量删除")])),_:1}),O,u(K,{onSizeChange:Q,onCurrentChange:R,"current-page":G.value,"page-size":M.value,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,40],total:g.value.length},null,8,["current-page","page-size","total"])])),_:1})])}}}),[["__scopeId","data-v-4ee51547"]]);export{S as default};

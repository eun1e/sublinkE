import{b as e,G as a,U as l,H as o,b7 as t,b6 as s,J as u,r as i,k as n,C as r,bZ as d,P as v,Q as p,a9 as m,d as c,a as f,c as b,e as y,l as g,X as _,b_ as h,g as k,aP as C,n as w,ac as x,f as V,a2 as j,t as B,_ as S,W as z,F as I,b2 as E,O as R,R as D,o as G,p as U,V as N,be as O,B as $,a6 as K,s as L,v as T,Z as F,w as A,m as H,$ as q,ay as P,aH as Q,a0 as Z,a1 as J,aN as M,aO as W}from"./index.DDtd-U5d.js";import{E as X}from"./el-card.BrD9DXyp.js";import{g as Y,A as ee,U as ae,D as le,E as oe,a as te,b as se}from"./node.CEbEhqFk.js";import{E as ue}from"./el-tag.rlQtCP1E.js";import"./el-select.vHplE1dK.js";import"./el-scrollbar.W9MDnCRG.js";import"./el-popper.DIcchwDq.js";import"./el-tooltip.l0sNRNKZ.js";import{E as ie}from"./el-dialog.QTXgS5XX.js";import{_ as ne}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./isEqual.DA1k9kKJ.js";import"./_initCloneObject.CldPqO4-.js";import"./debounce.BGfoqU0l.js";import"./index.DfOG9kuX.js";import"./strings.Beciz0aK.js";import"./isUndefined.DgmxjSXK.js";import"./use-dialog.iKS4OFZ3.js";import"./refs.5UhZbuPJ.js";const re=e({modelValue:{type:[String,Number,Boolean],default:void 0},size:a,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),de=e({...re,border:Boolean}),ve={[l]:e=>o(e)||t(e)||s(e),[u]:e=>o(e)||t(e)||s(e)},pe=Symbol("radioGroupKey"),me=(e,a)=>{const o=i(),t=n(pe,void 0),s=r((()=>!!t)),u=r((()=>d(e.value)?e.label:e.value)),c=r({get:()=>s.value?t.modelValue:e.modelValue,set(i){s.value?t.changeEvent(i):a&&a(l,i),o.value.checked=e.modelValue===u.value}}),f=v(r((()=>null==t?void 0:t.size))),b=p(r((()=>null==t?void 0:t.disabled))),y=i(!1),g=r((()=>b.value||s.value&&c.value!==u.value?-1:0));return m({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},r((()=>s.value&&d(e.value)))),{radioRef:o,isGroup:s,radioGroup:t,focus:y,size:f,disabled:b,tabIndex:g,modelValue:c,actualValue:u}},ce=["value","name","disabled"],fe=c({name:"ElRadio"});var be=S(c({...fe,props:de,emits:ve,setup(e,{emit:a}){const l=e,o=f("radio"),{radioRef:t,radioGroup:s,focus:u,size:i,disabled:n,modelValue:r,actualValue:d}=me(l,a);function v(){z((()=>a("change",r.value)))}return(e,a)=>{var l;return b(),y("label",{class:w([k(o).b(),k(o).is("disabled",k(n)),k(o).is("focus",k(u)),k(o).is("bordered",e.border),k(o).is("checked",k(r)===k(d)),k(o).m(k(i))])},[g("span",{class:w([k(o).e("input"),k(o).is("disabled",k(n)),k(o).is("checked",k(r)===k(d))])},[_(g("input",{ref_key:"radioRef",ref:t,"onUpdate:modelValue":a[0]||(a[0]=e=>C(r)?r.value=e:null),class:w(k(o).e("original")),value:k(d),name:e.name||(null==(l=k(s))?void 0:l.name),disabled:k(n),type:"radio",onFocus:a[1]||(a[1]=e=>u.value=!0),onBlur:a[2]||(a[2]=e=>u.value=!1),onChange:v,onClick:a[3]||(a[3]=x((()=>{}),["stop"]))},null,42,ce),[[h,k(r)]]),g("span",{class:w(k(o).e("inner"))},null,2)],2),g("span",{class:w(k(o).e("label")),onKeydown:a[4]||(a[4]=x((()=>{}),["stop"]))},[V(e.$slots,"default",{},(()=>[j(B(e.label),1)]))],34)],2)}}}),[["__file","radio.vue"]]);const ye=e({...re}),ge=["value","name","disabled"],_e=c({name:"ElRadioButton"});var he=S(c({..._e,props:ye,setup(e){const a=e,l=f("radio"),{radioRef:o,focus:t,size:s,disabled:u,modelValue:i,radioGroup:n,actualValue:d}=me(a),v=r((()=>({backgroundColor:(null==n?void 0:n.fill)||"",borderColor:(null==n?void 0:n.fill)||"",boxShadow:(null==n?void 0:n.fill)?`-1px 0 0 0 ${n.fill}`:"",color:(null==n?void 0:n.textColor)||""})));return(e,a)=>{var r;return b(),y("label",{class:w([k(l).b("button"),k(l).is("active",k(i)===k(d)),k(l).is("disabled",k(u)),k(l).is("focus",k(t)),k(l).bm("button",k(s))])},[_(g("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":a[0]||(a[0]=e=>C(i)?i.value=e:null),class:w(k(l).be("button","original-radio")),value:k(d),type:"radio",name:e.name||(null==(r=k(n))?void 0:r.name),disabled:k(u),onFocus:a[1]||(a[1]=e=>t.value=!0),onBlur:a[2]||(a[2]=e=>t.value=!1),onClick:a[3]||(a[3]=x((()=>{}),["stop"]))},null,42,ge),[[h,k(i)]]),g("span",{class:w(k(l).be("button","inner")),style:I(k(i)===k(d)?k(v):{}),onKeydown:a[4]||(a[4]=x((()=>{}),["stop"]))},[V(e.$slots,"default",{},(()=>[j(B(e.label),1)]))],38)],2)}}}),[["__file","radio-button.vue"]]);const ke=e({id:{type:String,default:void 0},size:a,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),Ce=ve,we=["id","aria-label","aria-labelledby"],xe=c({name:"ElRadioGroup"});var Ve=S(c({...xe,props:ke,emits:Ce,setup(e,{emit:a}){const o=e,t=f("radio"),s=E(),u=i(),{formItem:n}=R(),{inputId:d,isLabeledByFormItem:v}=D(o,{formItemContext:n});G((()=>{const e=u.value.querySelectorAll("[type=radio]"),a=e[0];!Array.from(e).some((e=>e.checked))&&a&&(a.tabIndex=0)}));const p=r((()=>o.name||s.value));return U(pe,N({...O(o),changeEvent:e=>{a(l,e),z((()=>a("change",e)))},name:p})),$((()=>o.modelValue),(()=>{o.validateEvent&&(null==n||n.validate("change").catch((e=>K())))})),(e,a)=>(b(),y("div",{id:k(d),ref_key:"radioGroupRef",ref:u,class:w(k(t).b("group")),role:"radiogroup","aria-label":k(v)?void 0:e.label||"radio-group","aria-labelledby":k(v)?k(n).labelId:void 0},[V(e.$slots,"default")],10,we))}}),[["__file","radio-group.vue"]]);const je=L(be,{RadioButton:he,RadioGroup:Ve}),Be=T(Ve);T(he);const Se=e=>(M("data-v-647af061"),e=e(),W(),e),ze={class:"dialog-footer"},Ie=Se((()=>g("div",{style:{"margin-bottom":"10px"}},null,-1))),Ee=Se((()=>g("div",{style:{"margin-top":"20px"}},null,-1))),Re=Se((()=>g("div",{style:{"margin-top":"20px"}},null,-1))),De=ne(c({__name:"nodes",setup(e){const a=i([]),l=i(""),o=i(""),t=i(""),s=i(!1),u=i(),n=i(""),d=i("1");async function v(){const{data:e}=await Y();a.value=e}G((async()=>{v()}));const p=()=>{n.value="添加节点",l.value="",o.value="",s.value=!0},m=async()=>{let e=l.value.split(/[\r\n,]/);if(e=e.map((e=>e.trim())).filter((e=>""!==e)),"添加节点"==n.value){if("1"===d.value){if(""===o.value.trim())return void P.error("备注不能为空");e&&(l.value=e.join(","),await ee({link:l.value.trim(),name:o.value.trim()}))}else for(let a=0;a<e.length;a++)await ee({link:e[a],name:""});P.success("添加成功")}else await ae({oldname:t.value.trim(),link:l.value.trim(),name:o.value.trim()}),P.success("更新成功");v(),l.value="",o.value="",s.value=!1},c=i([]),f=e=>{c.value=e},_=()=>{0!==c.value.length&&Q.confirm("你是否要删除选中这些 ?","提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{for(let e=0;e<c.value.length;e++)le({id:c.value[e].ID}),a.value=a.value.filter((a=>a.ID!==c.value[e].ID));P({type:"success",message:"删除成功"})}))},h=i(1),C=i(10),w=e=>{C.value=e},x=e=>{h.value=e},V=r((()=>{const e=(h.value-1)*C.value,l=e+C.value;return a.value.slice(e,l)})),S=e=>{(e=>{const a=document.createElement("textarea");a.value=e,document.body.appendChild(a),a.select();try{const e=document.execCommand("copy");P({type:e?"success":"warning",message:e?"复制成功！":"复制失败！"})}catch(l){P({type:"warning",message:"复制失败！"})}finally{document.body.removeChild(a)}})(e.Link)};return(e,i)=>{const r=Z,c=je,I=Be,E=J,R=ie,D=oe,G=ue,U=te,N=se,O=X;return b(),y("div",null,[F(R,{modelValue:s.value,"onUpdate:modelValue":i[4]||(i[4]=e=>s.value=e),title:n.value,width:"80%"},{footer:A((()=>[g("div",ze,[F(E,{onClick:i[3]||(i[3]=e=>s.value=!1)},{default:A((()=>[j("关闭")])),_:1}),F(E,{type:"primary",onClick:m},{default:A((()=>[j("确定")])),_:1})])])),default:A((()=>[F(r,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=e=>l.value=e),placeholder:"请输入节点多行使用回车或逗号分开,支持base64格式的url订阅",type:"textarea",style:{"margin-bottom":"10px"},autosize:{minRows:2,maxRows:10}},null,8,["modelValue"]),"添加节点"==n.value?(b(),H(I,{key:0,modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=e=>d.value=e),class:"ml-4"},{default:A((()=>[F(c,{value:"1",size:"large"},{default:A((()=>[j("合并")])),_:1}),F(c,{value:"2",size:"large"},{default:A((()=>[j("分开")])),_:1})])),_:1},8,["modelValue"])):q("",!0),"2"!=d.value?(b(),H(r,{key:1,modelValue:o.value,"onUpdate:modelValue":i[2]||(i[2]=e=>o.value=e),placeholder:"请输入备注"},null,8,["modelValue"])):q("",!0)])),_:1},8,["modelValue","title"]),F(O,null,{default:A((()=>[F(E,{type:"primary",onClick:p},{default:A((()=>[j("添加节点")])),_:1}),Ie,F(U,{ref_key:"table",ref:u,data:k(V),style:{width:"100%"},onSelectionChange:f},{default:A((()=>[F(D,{type:"selection",fixed:"",prop:"ID",label:"id"}),F(D,{prop:"Name",label:"备注"},{default:A((e=>[F(G,{type:"success"},{default:A((()=>[j(B(e.row.Name),1)])),_:2},1024)])),_:1}),F(D,{prop:"Link",label:"节点","show-overflow-tooltip":!0}),F(D,{prop:"CreateDate",label:"创建时间",sortable:""}),F(D,{fixed:"right",label:"操作",width:"120"},{default:A((e=>[F(E,{link:"",type:"primary",size:"small",onClick:a=>S(e.row)},{default:A((()=>[j("复制")])),_:2},1032,["onClick"]),F(E,{link:"",type:"primary",size:"small",onClick:u=>(e=>{for(let u=0;u<a.value.length;u++)a.value[u].ID===e.ID&&(n.value="编辑节点",o.value=a.value[u].Name,t.value=o.value,l.value=a.value[u].Link,s.value=!0)})(e.row)},{default:A((()=>[j("编辑")])),_:2},1032,["onClick"]),F(E,{link:"",type:"primary",size:"small",onClick:a=>{return l=e.row,void Q.confirm(`你是否要删除 ${l.Name} ?`,"提示",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{await le({id:l.ID}),P({type:"success",message:"删除成功"}),v()}));var l}},{default:A((()=>[j("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),Ee,F(E,{type:"info",onClick:i[5]||(i[5]=e=>{z((()=>{a.value.forEach((e=>{u.value.toggleRowSelection(e,!0)}))}))})},{default:A((()=>[j("全选")])),_:1}),F(E,{type:"warning",onClick:i[6]||(i[6]=e=>{u.value.clearSelection()})},{default:A((()=>[j("取消选择")])),_:1}),F(E,{type:"danger",onClick:_},{default:A((()=>[j("批量删除")])),_:1}),Re,F(N,{onSizeChange:w,onCurrentChange:x,"current-page":h.value,"page-size":C.value,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,40],total:a.value.length},null,8,["current-page","page-size","total"])])),_:1})])}}}),[["__scopeId","data-v-647af061"]]);export{De as default};
